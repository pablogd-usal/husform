<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Estilos para pantalla -->
    <link rel="stylesheet" href="formulario.css" media="screen">

    <!-- Estilos para impresión -->
    <link rel="stylesheet" href="formulario.print.css" media="print">
</head>

<body>

    <div class="container-fluid">

        <div class="row justify-content-center mt-5 mb-5">

            <div class="col-10">

                <form id="miFormulario">

                    <div class="carta">

                        <div class="row">

                            <div class="col-6">

                                <header>

                                    <img class="headerImg" src="CHS.png">

                                </header>

                            </div>

                            <div class="col-6">

                                <h6 class="tituloFormulario"> UNIDAD DE DIAGNÓSTICO INTEGRADO Y MEDICINA PERSONALIZADA
                                    DE PRECISIÓN EN ONCOHEMATOLOGÍA </h6>

                            </div>

                        </div>

                        <div class="row mt-2">

                            <div class="col-12">

                                <h4> <b> CITOGENÉTICA Y BIOLOGÍA MOLECULAR </b> </h4>

                            </div>

                        </div>

                        <div class="row mt-2">

                            <!-- NOMBRE / APELLIDOS / Nº HISTORIA CLÍNICA -->

                            <div class="col-6">

                                <div class="cuadrado">

                                    <h6 class="tituloParte0"> DATOS DEL PACIENTE O ETIQUETA </h6>

                                    <div class="row mt-1 mx-1">

                                        <div class="col-5">

                                            <label for="nombreApellidos" class="form-label labelNombre"> NOMBRE Y APELL.:
                                            </label>

                                        </div>

                                        <div class="col-7">

                                            <input type="text" class="form-control nombre" id="nombreApellidos" name="nombreApellidos"
                                                maxlength="45">

                                        </div>

                                    </div>


                                    <div class="row  mt-1 mx-1">

                                        <div class="col-6">

                                            <label for="nHistoriaClinica" class="form-label labelHistoria mt-2"> Nº
                                                HISTORIA CLÍNICA: </label>

                                        </div>

                                        <div class="col-6">

                                            <input type="text" class="form-control nHistoria" id="nHistoriaClinica"
                                                maxlength="22">

                                        </div>

                                    </div>

                                    <div class="row mt-1 mx-1">

                                        <div class="col-7">

                                            <label for="fechaNacimiento" class="form-label labelFecha mt-1"> FECHA DE
                                                NACIMIENTO: </label>

                                        </div>

                                        <div class="col-5">

                                            <input type="date" class="form-control fechaNacimiento"
                                                id="fechaNacimiento">

                                        </div>

                                    </div>



                                    <div class="row my-1 mx-1" id="sexo">

                                        <div class="col-3">

                                            <p class="form-label labelSexo mt-2"> SEXO: </p>

                                        </div>

                                        <div class="col-7 sexoCategoria d-flex mt-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="radioMasculino" name="sexo" value="masculino">
                                                <label class="form-check-label" for="radioMasculino">Masculino</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="radioFemenino" name="sexo" value="femenino">
                                                <label class="form-check-label" for="radioFemenino">Femenino</label>
                                            </div>

                                            <div id="sexoSeleccionado" class="sexoSeleccionado ms-3"></div>
                                        </div>
                                    </div>



                                </div>

                            </div>

                            <!-- DATOS DEL SOLICITANTE -->

                            <div class="col-6">

                                <div class="cuadrado">

                                    <h6 class="tituloParte1"> DATOS DEL SOLICITANTE </h6>

                                    <div class="row my-1 mx-1">

                                        <div class="col-4">

                                            <label for="medico" class="form-label labelSolicitante"> SOLICITANTE:
                                            </label>

                                        </div>

                                        <div class="col-8">

                                            <input type="text" class="form-control inputMedico" id="medico"
                                                maxlength="56">

                                        </div>

                                    </div>

                                    <div class="row my-1 mx-1">

                                        <div class="col-3">

                                            <label for="hospital" class="form-labe labelHospital mt-2"> HOSPITAL:
                                            </label>

                                        </div>

                                        <div class="col-9">

                                            <input type="text" class="form-control inputHospital" id="hospital"
                                                maxlength="56">

                                        </div>

                                    </div>

                                    <div class="row my-1 mx-1">

                                        <div class="col-4">

                                            <label for="email" class="form-label labelEmail mt-2"> EMAIL: </label>

                                        </div>

                                        <div class="col-8">

                                            <input type="email" class="form-control inputEmail" id="email"
                                                maxlength="56">

                                        </div>

                                    </div>

                                    <div class="row my-1 mx-1">

                                        <div class="col-4">

                                            <label for="telefono" class="form-label labelTelefono mt-2"> TELÉFONO:
                                            </label>

                                        </div>

                                        <div class="col-8">

                                            <input type="tel" class="form-control inputTelefono" id="telefono"
                                                maxlength="56">

                                        </div>

                                    </div>

                                </div>

                            </div>

                        </div>

                        <h4 class="tituloParte2 px-2"> DATOS DE LA ENFERMEDAD Y DE LA MUESTRA </h4>

                        <!-- FECHA EXTRACCIÓN -->

                        <div class="form-group d-flex align-items-center mx-sm-3 my-1 mx-1">
                            <label for="fechaExtraccion" class="mb-0 mr-2 labelFechaExtraccion">FECHA
                                EXTRACCIÓN:</label>
                            <input type="date" class="form-control inputFechaExtraccion" id="fechaExtraccion"
                                style="width:auto;">
                        </div>

                        <!-- DIAGNOSTICOS -->

                        <div class="row mb-3">

                            <div class="col-12">

                                <div class="row">
                                    <div class="col-6 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="diagnosticoTipo"
                                                id="diagnosticoConfirmado" value="confirmado">
                                            <label class="form-check-label" for="diagnosticoConfirmado">
                                                Diagnóstico confirmado<br /><small>(Según OMS/ICC)</small>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="col-6 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="diagnosticoTipo"
                                                id="diagnosticoSospecha" value="sospecha">
                                            <label class="form-check-label" for="diagnosticoSospecha">
                                                Diagnóstico de Sospecha<br /><small>(indicar cifras de hemograma si procede)</small>
                                            </label>
                                        </div>
                                    </div>
                                </div>


                                <!-- Contenedor donde aparecerán los 4 inputs -->
                                <div id="inputsDiagnostico" class="mt-3">

                                </div>

                                <textarea class="form-control diagnosticoTexto" id="diagnosticoTexto"
                                    oninput="actualizarVista(this, 'vistaDiagnostico')" rows="3"
                                    placeholder="Especificar diagnóstico..."></textarea>

                                <div id="vistaDiagnostico" class="vista-impresion"></div>

                                <div id="notaSospecha" style="display: none; color: red; margin-top: 5px;">
                                    Se ruega que una vez se tenga el diagnóstico se envíe la confirmación al mail
                                    indicado
                                </div>

                            </div>

                        </div>

                        <!-- MOMENTO EVOLUTIVO -->

                        <div class="row mb-3 justify-content-between">

                            <div class="col-6">

                                <div class="row">

                                    <div class="col-12">

                                        <p class="form-label labelMomentoEvolutivo px-2"> MOMENTO
                                            EVOLUTIVO</p>

                                    </div>

                                </div>

                                <div class="row">

                                    <div class="col-12 d-flex flex-wrap gap-3">

                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input radioDiagnosticoMmento" type="radio"
                                                name="momentoEvolutivo" id="diagnostico"
                                                onclick="guardarMomentoEvolutivo()">
                                            <label class="form-check-label" for="diagnostico"> Diagnóstico </label>
                                        </div>

                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input radioRecaida" type="radio"
                                                name="momentoEvolutivo" id="recaidaProgresion"
                                                onclick="guardarMomentoEvolutivo()">
                                            <label class="form-check-label" for="recaidaProgresion"> Recaída/Progresión
                                            </label>
                                        </div>

                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input radioEmr" type="radio"
                                                name="momentoEvolutivo" id="emr" onclick="mostrarCampoTextoEMR()">
                                            <label class="form-check-label" for="emr"> EMR </label>
                                        </div>

                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input radioEvolutivo" type="radio"
                                                name="momentoEvolutivo" id="evolutivo"
                                                onclick="guardarMomentoEvolutivo()">
                                            <label class="form-check-label" for="evolutivo"> Evolutivo </label>
                                        </div>

                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input radioOtros" type="radio"
                                                name="momentoEvolutivo" id="otrosEvolutivos"
                                                onclick="mostrarCampoTextoMomento()">
                                            <label class="form-check-label" for="otrosEvolutivos"> Otros </label>
                                        </div>

                                    </div>

                                </div>

                                <div class="otrosInput" style="display: none;">

                                    <input type="text" id="otrosInputEvolutivo" class="form-control inputOtros"
                                        placeholder="Especificar...">

                                </div>

                                <div id="emrMarker" class="emrMarker" style="display: none;">

                                    <input type="text" class="form-control inputEmr" id="marcadorMolecular"
                                        placeholder="Marcador molecular de seguimiento...">

                                </div>

                                <div id="errorMensaje" style="color: red; display: none; font-size: 13px;"> Seleccione
                                    una opción </div>

                            </div>

                            <!-- TIPO DE MUESTRA E INFILTRACIÓN -->

                            <div class="col-6">

                                <p class="form-label labelTipoMuestra px-2"> TIPO DE MUESTRA</p>

                                <div class="d-flex flex-wrap gap-3">

                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input checkboxSp" type="checkbox" name="tipoMuestra"
                                            id="sp">
                                        <label class="form-check-label" for="sp"> SP </label>
                                    </div>

                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input checkboxMo" type="checkbox" name="tipoMuestra"
                                            id="mo">
                                        <label class="form-check-label" for="mo"> Mo </label>
                                    </div>

                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input checkboxGanglio" type="checkbox"
                                            name="tipoMuestra" id="ganglio">
                                        <label class="form-check-label" for="ganglio"> Ganglio </label>
                                    </div>

                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input checkboxParafina" type="checkbox"
                                            name="tipoMuestra" id="parafina">
                                        <label class="form-check-label" for="parafina"> Parafina </label>
                                    </div>

                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input checkboxTejidos" type="checkbox"
                                            name="tipoMuestra" id="otrosTejidos">
                                        <label class="form-check-label" for="otrosTejidos"> Otros tejidos </label>
                                    </div>

                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input checkboxLiquido" type="checkbox"
                                            name="tipoMuestra" id="liquido">
                                        <label class="form-check-label" for="liquido"> Líquido </label>
                                    </div>
                                </div>

                                <div class="form-check d-flex align-items-center gap-2 mt-3">
                                    <input type="number" class="form-control inputInfiltracion" id="infiltracion"
                                        name="infiltracion" min="0" max="100">
                                    <label for="infiltracion" class="form-check-label"> infiltración de la muestra (%)
                                    </label>
                                </div>

                                <div class="inputMuestra" style="display: none;">
                                    <input type="text" id="otrosInputMuestra" class="form-control inputMuestraa"
                                        placeholder="Especificar...">
                                </div>

                                <div id="errorMensajeMuestra" style="color: red; display: none; font-size: 13px;">
                                    Seleccione una opción </div>
                            </div>

                        </div>

                        <!-- CAMDIDATO A TRATAMIENTO INTENSIVO -->

                        <div class="row mb-3">
                            <!-- Columna 1: Tratamiento Intensivo -->
                            <div class="col-6 mb-2">
                                <div class="dropdown w-100">
                                    <button class="btn btn-primary dropdown-toggle w-100 seleccionarCandidato" type="button"
                                        data-bs-toggle="dropdown" id="tratamiento">
                                        CANDIDATO A TRATAMIENTO INTENSIVO:
                                    </button>
                                    <ul class="dropdown-menu w-100">
                                        <li><a class="dropdown-item" href="#" onclick="guardarOpcion('Si', event)">Sí</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="guardarOpcion('No', event)">No</a></li>
                                    </ul>
                                </div>
                                <input type="hidden" id="tratamientoSeleccionado" value="">
                            </div>

                            <!-- Columna 2: Ensayo Clínico -->
                            <div class="col-6 mb-2">
                                <div class="dropdown w-100">
                                    <button class="btn btn-primary dropdown-toggle w-100 seleccionarEnsayo" type="button"
                                        data-bs-toggle="dropdown" id="ensayo">
                                        ENSAYO CLÍNICO/PROTOCOLO:
                                    </button>
                                    <ul class="dropdown-menu w-100">
                                        <li><a class="dropdown-item" href="#" onclick="guardarOpcionEnsayo('Si', event)">Sí</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="guardarOpcionEnsayo('No', event)">No</a></li>
                                    </ul>
                                </div>
                                <div id="ensayoClinicoDetalles" style="display: none; margin-top: 10px;">
                                    <input type="text" class="form-control inputEnsayoClinico" id="ensayoClinicoTexto"
                                        placeholder="Especificar ensayo o protocolo...">
                                </div>
                                <input type="hidden" id="ensayoSeleccionado" value="">
                            </div>
                        </div>

                        <h4 class="tituloParte3"> SOLICITUD DE ESTUDIOS </h4>

                        <!-- ESTUDIOS PROTOCOLIZADOS -->

                        <div class="row mb-3">

                            <div class="col-6 colEstudiosProtocolizados">

                                <button class="btn btn-primary dropdown-toggle seleccionarEstudio" type="button"
                                    data-bs-toggle="dropdown" id="dropdownEstudios">
                                    ESTUDIOS PROTOCOLIZADOS:
                                </button>

                                <div class="dropdown-menu" aria-labelledby="dropdownEstudios">

                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Aplasia medular', event)">Aplasia medular</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Citopenias aisladas', event)">Citopenias aisladas</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Eosinofilia', event)">Eosinofilia</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Hemofilia y Von Willebrand', event)">Hemofilia y Von Willebrand</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Leucemia aguda linfoblástica', event)">Leucemia aguda linfoblástica</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Leucemia aguda mieloblástica', event)">Leucemia aguda mieloblástica</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Leucemia de linfocitos grandes granulares', event)">Leucemia de linfocitos grandes granulares</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Leucemia linfática crónica', event)">Leucemia linfática crónica</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Leucemia mieloide crónica', event)">Leucemia mieloide crónica</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Leucemia mielomonocítica crónica', event)">Leucemia mielomonocítica crónica</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Leucemia neutrofílica crónica', event)">Leucemia neutrofílica crónica</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Linfoma de células B grandes difuso', event)">Linfoma de células B grandes difuso</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Linfoma de células del manto', event)">Linfoma de células del manto</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Linfoma folicular', event)">Linfoma folicular</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Linfoma no hodgkin T', event)">Linfoma no hodgkin T</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Mastocitosis', event)">Mastocitosis</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Macroglobulinemia de Waldestrom', event)">Macroglobulinemia de Waldestrom</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Mieloma Múltiple', event)">Mieloma Múltiple</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Neoplasias mieloproliferativas crónicas no LMC', event)">Neoplasias mieloproliferativas crónicas no LMC</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Síndrome de VEXAS', event)">Síndrome de VEXAS</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Síndrome mielodisplásico', event)">Síndrome mielodisplásico</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Sospecha de síndrome linfoproliferativo', event)">Sospecha de síndrome linfoproliferativo</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Tricoleucemia', event)">Tricoleucemia</a>
                                    <a class="dropdown-item" href="#"
                                        onclick="guardarOpcionEstudio('Trombosis de territorios esplácnicos', event)">Trombosis de territorios esplácnicos</a>

                                </div>

                                <input type="hidden" id="estudiosSeleccionados" value="">

                                <div id="textoSeleccionado" class="p-3 border bg-light mt-3">

                                    <!-- Aquí aparecerá el contenido dinámico -->

                                    Selecciona una opción para ver los detalles.

                                </div>

                            </div>

                            <!-- OTROS ESTUDIOS -->

                            <div class="col-6 colOtrosEstudios">

                                <p class="pOtrosEstudios"> OTROS ESTUDIOS: </p>

                                <div class="form-check">
                                    <input class="form-check-input checkboxClonalidadB" type="checkbox"
                                        name="otrosEstudios" id="clonalidadB">
                                    <label class="form-check-label" for="clonalidadB">Clonalidad B</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input checkboxClonalidadT" type="checkbox"
                                        name="otrosEstudios" id="clonalidadT">
                                    <label class="form-check-label" for="clonalidadT"> Clonalidad T </label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input checkboxMieloide" type="checkbox"
                                        name="otrosEstudios" id="panelNGSMieloide">
                                    <label class="form-check-label" for="panelNGSMieloide">Panel NGS mieloide </label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input checkboxLinfoide" type="checkbox"
                                        name="otrosEstudios" id="panelNGSLinfoideBResistencias">
                                    <label class="form-check-label" for="panelNGSLinfoideBResistencias"> Panel NGS
                                        linfoide B de resistencias a iBTK y iBCL2 </label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input checkboxMutaciones" type="checkbox"
                                        name="otrosEstudios" id="mutacionesABL">
                                    <label class="form-check-label" for="mutacionesABL"> Mutaciones de ABL </label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input checkboxExon" type="checkbox" id="exon12"
                                        name="exon12">
                                    <label class="form-check-label" for="exon12"> JAK2 (Exón 12) </label>
                                </div>

                                <div id="notaExon12"
                                    style="display: none; color: #666; font-size: 0.9em; margin-top: 5px; margin-left: 20px;">
                                    Nota: Solo se realizará en muestras de médula ósea o si hay una justificación
                                    clínica adecuada.
                                </div>

                                <div id="justificacionOtrosEstudios" style="display: none;">

                                    <label for="justificacionOtrosEstudiosTexto" class="form-label">JUSTIFICACIÓN DE
                                        OTROS ESTUDIOS:</label>
                                    <textarea class="form-control justificacionEstudios"
                                        id="justificacionOtrosEstudiosTexto"
                                        oninput="actualizarVista(this, 'vistaJustificacion')" rows="2"
                                        placeholder="Especificar justificación..."></textarea>

                                    <div id="vistaJustificacion" class="vista-impresion"></div>

                                </div>

                            </div>

                        </div>

                        <hr class="solo-imprimir">

                        <!-- BOTÓN -->

                        <div class="row mb-3">

                            <div class="botones">

                                <div class="col-2">

                                    <button type="button" id="imprimirBtn" class="btnImprimir"> Imprimir dos veces
                                    </button>

                                </div>

                            </div>

                        </div>

                    </div>

                </form>

            </div>

        </div>

    </div>

    <div class="row mb-3">

        <div class="col-6">

            <div class="notasFinales">

                <p> Instrucciones: </p>

                <ul>

                    <li> En todos los casos se enviará un tubo de EDTA y un tubo de heparina (sódica o litio) </li>

                </ul>

            </div>

        </div>

        <div class="col-6">

            <div class="notasFinales">

                <p> Datos: </p>

                <ul>

                    <li> Solo se harán los estudios en tejidos que estén infiltrados por el linfoma (rogamos confirmar %
                        de infiltración) </li>
                    <li> Se guardará DNA de todas las muestras de MO </li>
                    <li> Mails de contacto: Lista de distribución y mail de Ricardo </li>
                    <li> La información registrada en el formulario online no quedará almacenada en el sistema de
                        solicitud </li>

                </ul>

            </div>

        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="formulario.js"></script>

    <script>

        function actualizarVista(textarea, divId) {

            const vista = document.getElementById(divId);
            vista.textContent = textarea.value;

        }

    </script>

</body>

</html>